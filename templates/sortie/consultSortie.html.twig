{% extends 'base.html.twig' %}

{% block title %}Sortie | {{ parent() }}{% endblock %}

{% block body %}
    <h3>{{ sortie.name }}</h3>
    <br>
    <form>
        <div class="form-group">
            <p><span style="font-weight: bold">Organisateur de la sortie : </span> <a href="{{ path('user_show_profile', {'id': sortie.organisateur.id}) }}">{{ sortie.organisateur.firstname }} {{ sortie.organisateur.lastname }}</a></p>
            <p><span style="font-weight: bold">Date et heure de la sortie : </span>{{ sortie.dateTimeStart |date("Y-m-d h:i") }}</p>
            <p><span style="font-weight: bold">Date limite d'inscription : </span>{{ sortie.deadlineRegistration |date("Y-m-d h:i") }}</p>
            <p><span style="font-weight: bold">Nombre de place : </span>{{ sortie.maxNumberRegistration }}</p>
            <p><span style="font-weight: bold">Durée : </span>{{ sortie.duration }}</p>
            <p><span style="font-weight: bold">Description et infos : </span>{{ sortie.description }}</p>
            <p><span style="font-weight: bold">Lieu : </span>{{ sortie.lieu.name }}</p>
            <p><span style="font-weight: bold">Adresse : </span>{{ sortie.lieu.street }}</p>
            <p><span style="font-weight: bold">Code Postal : </span>{{ sortie.lieu.ville.zip }}</p>
            <p><span style="font-weight: bold">Ville : </span>{{ sortie.lieu.ville.name }}</p>
            <p><span style="font-weight: bold">Coordonnées GPS : </span>{{ sortie.lieu.latitude }} / {{ sortie.lieu.longitude }}</p>

            {% if sortie.deadlineRegistration >  date()%}<a class="btn-floating btn-small waves-effect waves-light right black"href="{{ path('sortie_inscription',{'id': sortie.id, 'csrf': csrf_token('sortie_inscription_'~sortie.id)}) }}">M'inscrire</a>{% endif %}
            {% if sortie.id in userSortie %}{% if sortie.dateTimeStart > date() %}<a class="btn-floating btn-small waves-effect waves-light right black"href="{{ path('sortie_remove_inscription',{'id': sortie.id, 'csrf': csrf_token('sortie_remove_inscription_'~sortie.id)}) }}">Me désister</a>{% endif %}{% endif %}

        </div>
    </form>

    <table>
        <thead>
            <tr>
                <th class="th-sm">Pseudo</th>
                <th class="th-sm">Prénom et Nom</th>
            </tr>
        </thead>
        <tbody>
            {% for user in usersList %}
            <tr>
                <td><a href="{{path('user_show_profile', {'id': user.id})}}">{{ user.username }}</a></td>
                <td>{{ user.firstname }} {{ user.lastname }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

{% endblock %}
